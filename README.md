# ğŸµ Predicting the Beats-per-Minute of Songs

<a target="_blank" href="https://cookiecutter-data-science.drivendata.org/">
    <img src="https://img.shields.io/badge/CCDS-Project%20template-328F97?logo=cookiecutter" />
</a>

Kaggle Playground Seriesç«¶æŠ€: æ¥½æ›²ã®Beats-per-Minute (BPM)ã‚’äºˆæ¸¬ã™ã‚‹MLãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
ğŸ† **å®Ÿé¨“ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ** | ğŸ¼ **éŸ³æ¥½ç†è«–ãƒ™ãƒ¼ã‚¹ç‰¹å¾´é‡** | ğŸ¤– **è‡ªå‹•æå‡ºã‚·ã‚¹ãƒ†ãƒ **

## About This Competition

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ **Kaggle Playground Series (September 2025)** ã® "Predicting the Beats-per-Minute of Songs" ç«¶æŠ€ç”¨ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

### ğŸ¯ å•é¡Œè¨­å®š
- **ã‚¿ã‚¹ã‚¯**: æ¥½æ›²ã®ç‰¹å¾´é‡ã‹ã‚‰ Beats-per-Minute (BPM) ã‚’äºˆæ¸¬ã™ã‚‹å›å¸°å•é¡Œ
- **è©•ä¾¡æŒ‡æ¨™**: Root Mean Squared Error (RMSE)
- **ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ**: å®Ÿä¸–ç•Œãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç”Ÿæˆã•ã‚ŒãŸåˆæˆãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

### ğŸ“Š ç‰¹å¾´é‡
- `RhythmScore` - ãƒªã‚ºãƒ ã‚¹ã‚³ã‚¢
- `AudioLoudness` - éŸ³å£°ã®éŸ³é‡ãƒ¬ãƒ™ãƒ«
- `VocalContent` - ãƒœãƒ¼ã‚«ãƒ«å«æœ‰é‡
- `AcousticQuality` - éŸ³éŸ¿å“è³ª
- `InstrumentalScore` - æ¥½å™¨æ¼”å¥ã‚¹ã‚³ã‚¢
- `LivePerformanceLikelihood` - ãƒ©ã‚¤ãƒ–æ¼”å¥ã£ã½ã•
- `MoodScore` - ãƒ ãƒ¼ãƒ‰ã‚¹ã‚³ã‚¢
- `TrackDurationMs` - ãƒˆãƒ©ãƒƒã‚¯é•·ï¼ˆãƒŸãƒªç§’ï¼‰
- `Energy` - ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ¬ãƒ™ãƒ«

## ğŸš€ Quick Start

### ç’°å¢ƒè¨­å®š
```bash
make requirements  # ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```

### åŸºæœ¬çš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
```bash
# 1. ãƒ‡ãƒ¼ã‚¿å‡¦ç†
make data          # ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå‡¦ç†ã‚’å®Ÿè¡Œ

# 2. ãƒ¢ãƒ‡ãƒ«è¨“ç·´
python src/modeling/train.py

# 3. äºˆæ¸¬ãƒ»æå‡º
python src/modeling/predict.py
```

### ğŸ§ª å®Ÿé¨“ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ¨å¥¨ï¼‰
```bash
# å®Ÿé¨“ã®å®Ÿè¡Œã¨è‡ªå‹•æå‡º
python scripts/submit_experiment.py --experiment-name "my_experiment"

# çµæœç¢ºèª
ls experiments/  # å®Ÿé¨“çµæœã‚’ç¢ºèª
```

### é–‹ç™ºè€…ç”¨ã‚³ãƒãƒ³ãƒ‰
```bash
make format        # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
make lint          # ãƒªãƒ³ã‚¿ãƒ¼ãƒã‚§ãƒƒã‚¯
make test          # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
make clean         # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
```

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
â”œâ”€â”€ LICENSE            <- ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
â”œâ”€â”€ Makefile           <- make data ã‚„ make train ãªã©ã®ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰
â”œâ”€â”€ README.md          <- é–‹ç™ºè€…å‘ã‘ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«README
â”œâ”€â”€ CLAUDE.md          <- Claude Code ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆç”¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæŒ‡ç¤ºæ›¸
â”œâ”€â”€ data
â”‚   â”œâ”€â”€ external       <- ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ interim        <- å¤‰æ›æ¸ˆã¿ä¸­é–“ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ processed      <- ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ç”¨æœ€çµ‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ
â”‚   â””â”€â”€ raw            <- å…ƒã®ä¸å¤‰ãƒ‡ãƒ¼ã‚¿ãƒ€ãƒ³ãƒ—
â”‚
â”œâ”€â”€ docs               <- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¨ä½¿ç”¨ã‚¬ã‚¤ãƒ‰
â”‚   â”œâ”€â”€ KAGGLE_SUBMIT_GUIDE.md     <- Kaggleæå‡ºã‚¬ã‚¤ãƒ‰
â”‚   â”œâ”€â”€ TICKET-008_USAGE_GUIDE.md  <- ã‚¸ãƒ£ãƒ³ãƒ«ç‰¹å¾´é‡ä½¿ç”¨ã‚¬ã‚¤ãƒ‰
â”‚   â””â”€â”€ TICKET-008-01_USAGE_GUIDE.md <- å¤šé‡å…±ç·šæ€§é™¤å»ã‚¬ã‚¤ãƒ‰
â”‚
â”œâ”€â”€ experiments        <- ğŸ§ª å®Ÿé¨“ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ exp01_baseline_lgb/         <- ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³LightGBMå®Ÿé¨“
â”‚   â”œâ”€â”€ exp02_multicollinearity_removal/ <- ç‰¹å¾´é‡æœ€é©åŒ–å®Ÿé¨“
â”‚   â”œâ”€â”€ exp03_advanced_features/    <- é«˜åº¦ãªç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°
â”‚   â”œâ”€â”€ exp004_ticket016_rhythm_periodicity/ <- ãƒªã‚ºãƒ ãƒ™ãƒ¼ã‚¹ç‰¹å¾´é‡
â”‚   â”œâ”€â”€ exp005_ticket008_03_dimensionality_reduction/ <- PCAç‰¹å¾´é‡
â”‚   â””â”€â”€ experiment_results.csv     <- çµ±åˆå®Ÿé¨“çµæœ
â”‚
â”œâ”€â”€ models             <- è¨“ç·´æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã€äºˆæ¸¬çµæœ
â”‚
â”œâ”€â”€ notebooks          <- æ¢ç´¢çš„åˆ†æç”¨Jupyterãƒãƒ¼ãƒˆãƒ–ãƒƒã‚¯
â”‚
â”œâ”€â”€ pyproject.toml     <- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»˜ããƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”‚
â”œâ”€â”€ scripts            <- ğŸ¤– è‡ªå‹•åŒ–ãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ my_config.py           <- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â”‚   â”œâ”€â”€ submit.py              <- Kaggleæå‡ºã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ submit_experiment.py   <- è‡ªå‹•å®Ÿé¨“å®Ÿè¡Œãƒ„ãƒ¼ãƒ«
â”‚   â””â”€â”€ evaluate_genre_features.py <- ç‰¹å¾´é‡è©•ä¾¡ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚
â”œâ”€â”€ references         <- ãƒ‡ãƒ¼ã‚¿è¾æ›¸ã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã€èª¬æ˜è³‡æ–™
â”‚
â”œâ”€â”€ reports            <- HTMLã€PDFã€LaTeXç­‰ã®ç”Ÿæˆåˆ†æçµæœ
â”‚   â””â”€â”€ figures        <- ãƒ¬ãƒãƒ¼ãƒˆç”¨ç”Ÿæˆã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ»å›³è¡¨
â”‚
â”œâ”€â”€ requirements.txt   <- åˆ†æç’°å¢ƒå†ç¾ç”¨è¦ä»¶ãƒ•ã‚¡ã‚¤ãƒ«
â”‚
â”œâ”€â”€ tests              <- ã‚³ãƒ¼ãƒ‰å“è³ªä¿è¨¼ç”¨ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚
â””â”€â”€ src                <- ğŸ¼ ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
    â”‚
    â”œâ”€â”€ __init__.py             <- srcã‚’Pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–
    â”‚
    â”œâ”€â”€ config.py               <- æœ‰ç”¨ãªå¤‰æ•°ã¨è¨­å®šã®ä¿å­˜
    â”‚
    â”œâ”€â”€ dataset.py              <- ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ»åˆ†å‰²ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (typer CLI)
    â”‚
    â”œâ”€â”€ features.py             <- ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ãƒ»é¸æŠ (typer CLI)
    â”‚                              [åŒ…å«: ã‚¸ãƒ£ãƒ³ãƒ«ç‰¹å¾´é‡, æ¬¡å…ƒå‰Šæ¸›, ãƒªã‚ºãƒ å‘¨æœŸæ€§]
    â”‚
    â”œâ”€â”€ modeling
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ predict.py          <- ãƒ¢ãƒ‡ãƒ«æ¨è«–å®Ÿè¡Œã‚³ãƒ¼ãƒ‰ (typer CLI)
    â”‚   â””â”€â”€ train.py            <- ãƒ¢ãƒ‡ãƒ«è¨“ç·´ã‚³ãƒ¼ãƒ‰ (typer CLI)
    â”‚
    â””â”€â”€ plots.py                <- å¯è¦–åŒ–ä½œæˆã‚³ãƒ¼ãƒ‰ (typer CLI)
```

## ğŸ”¬ Development Workflow

### å®Ÿé¨“ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
å„å®Ÿé¨“ã¯ `experiments/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ä½“ç³»çš„ã«ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ï¼š

```bash
# æ–°ã—ã„å®Ÿé¨“ã®å®Ÿè¡Œ
python scripts/submit_experiment.py --experiment-name "exp006_new_feature"

# å®Ÿé¨“çµæœã®ç¢ºèª
cat experiments/experiment_results.csv
```

### ãƒ‡ãƒ¼ã‚¿åˆ†æã®é †åº
1. **ãƒ‡ãƒ¼ã‚¿ç†è§£ã¨EDA** (`src/dataset.py`, `src/plots.py`)
2. **ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°** (`src/features.py`)
3. **ãƒ¢ãƒ‡ãƒ«é–‹ç™ºãƒ»è¨“ç·´** (`src/modeling/train.py`)
4. **äºˆæ¸¬ãƒ»æå‡º** (`src/modeling/predict.py` ã¾ãŸã¯ `scripts/submit_experiment.py`)
5. **çµæœåˆ†æãƒ»æ¬¡å›å®Ÿé¨“è¨ˆç”»**

### Code Quality

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä»¥ä¸‹ã®å“è³ªåŸºæº–ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ï¼š
- **Ruff**: ãƒªãƒ³ãƒ†ã‚£ãƒ³ã‚°ã¨ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (99æ–‡å­—åˆ¶é™)
- **Type Hints**: Python 3.10+ ã®å‹ãƒ’ãƒ³ãƒˆã‚’ä½¿ç”¨
- **Loguru**: æ§‹é€ åŒ–ãƒ­ã‚°å‡ºåŠ› (tqdmçµ±åˆæ¸ˆã¿)
- **Typer**: å‹å®‰å…¨ãªCLIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Pytest**: åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ (76ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹)

### ãƒã‚±ãƒƒãƒˆãƒ™ãƒ¼ã‚¹é–‹ç™º

```
feature/ticket-XXX/æ©Ÿèƒ½å
```

å®Ÿè£…æ¸ˆã¿: TICKET-001ã€œ008 (ãƒ‡ãƒ¼ã‚¿å‡¦ç†, å¯è¦–åŒ–, ç‰¹å¾´é‡, ãƒ¢ãƒ‡ãƒ«è¨“ç·´, ãƒ†ã‚¹ãƒˆ, ã‚µãƒ–ãƒŸãƒƒã‚·ãƒ§ãƒ³, ã‚¸ãƒ£ãƒ³ãƒ«ç‰¹å¾´é‡)

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š**: `scripts/my_config.py`
- **é–‹ç™ºè€…è¨­å®š**: `CLAUDE.md`

## ğŸµ Advanced Features

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯éŸ³æ¥½ç†è«–ã«åŸºã¥ãé«˜åº¦ãªç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ğŸ¼ TICKET-008ã‚·ãƒªãƒ¼ã‚º: éŸ³æ¥½ç†è«–ãƒ™ãƒ¼ã‚¹ç‰¹å¾´é‡

#### 8.1 ã‚¸ãƒ£ãƒ³ãƒ«æ¨å®šç‰¹å¾´é‡ âœ…
- **ballad_genre_score**: VocalContentÃ—MoodScoreï¼ˆãƒãƒ©ãƒ¼ãƒ‰ç³»æ¥½æ›²æ¨å®šï¼‰
- **dance_genre_score**: EnergyÃ—RhythmScoreï¼ˆãƒ€ãƒ³ã‚¹ç³»æ¥½æ›²æ¨å®šï¼‰
- **ambient_genre_score**: AcousticQualityÃ—InstrumentalScoreï¼ˆã‚¢ãƒ³ãƒ“ã‚¨ãƒ³ãƒˆç³»æ¨å®šï¼‰
- **æˆæœ**: ballad_genre_scoreãŒæœ€é‡è¦ç‰¹å¾´é‡ã«é¸å‡º

#### 8.2 å¤šé‡å…±ç·šæ€§é™¤å» âœ…
- é«˜ç›¸é–¢ãƒšã‚¢ï¼ˆ>0.7ï¼‰ã®è‡ªå‹•æ¤œå‡ºãƒ»é™¤å»ã‚·ã‚¹ãƒ†ãƒ 
- ã‚¸ãƒ£ãƒ³ãƒ«ç‰¹å¾´é‡å„ªå…ˆã®æœ€é©åŒ–

#### 8.3 æ¬¡å…ƒå‰Šæ¸›ç‰¹å¾´é‡ âœ…
- PCAå¤‰æ›ã«ã‚ˆã‚‹ä¸»æˆåˆ†ç‰¹å¾´é‡
- æœ€é©ä¸»æˆåˆ†æ•°ã®è‡ªå‹•é¸æŠï¼ˆåˆ†æ•£å¯„ä¸ç‡ãƒ™ãƒ¼ã‚¹ï¼‰

### ğŸ¥ TICKET-016: ãƒªã‚ºãƒ å‘¨æœŸæ€§ç‰¹å¾´é‡

ãƒ‰ãƒ©ãƒãƒ¼è¦–ç‚¹ã‹ã‚‰ã®BPMäºˆæ¸¬ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼š

```python
# ãƒªã‚ºãƒ ãƒ‘ã‚¿ãƒ¼ãƒ³æ¨å®šç‰¹å¾´é‡ã®ç”Ÿæˆä¾‹
from src.features import create_rhythm_periodicity_features

features = create_rhythm_periodicity_features(data)
# -> rhythm_consistency_score, tempo_stability_index ãªã©
```

**ç‰¹å¾´**:
- **å‘¨æœŸæ€§ä¸€è²«æ€§ã‚¹ã‚³ã‚¢**: TrackDurationã¨BPMæ¨å®šã®æ•´åˆæ€§æ¤œè¨¼
- **ç–‘ä¼¼ãƒ‰ãƒ©ãƒ ç³»ç‰¹å¾´é‡**: ã‚­ãƒƒã‚¯ãƒ»ã‚¹ãƒã‚¢ãƒ»ãƒã‚¤ãƒãƒƒãƒˆå¯†åº¦æ¨å®š
- **æ‹å­å¤‰å‹•æ¨å®š**: ãƒ«ãƒãƒ¼ãƒˆã€åŠ é€Ÿã€æ¸›é€Ÿãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º

### ğŸš€ å®Ÿé¨“çµæœ

| å®Ÿé¨“å | RMSE | æ”¹å–„åº¦ | ä¸»è¦ç‰¹å¾´ |
|--------|------|--------|----------|
| exp01_baseline_lgb | 26.47 | - | LightGBM Baseline |
| exp02_multicollinearity_removal | 26.46 | -0.01 | å¤šé‡å…±ç·šæ€§é™¤å» |
| exp03_advanced_features | 26.45 | -0.02 | ã‚¸ãƒ£ãƒ³ãƒ«ç‰¹å¾´é‡ |
| exp004_ticket016 | TBD | TBD | ãƒªã‚ºãƒ å‘¨æœŸæ€§ |
| exp005_dimensionality_reduction | TBD | TBD | PCAç‰¹å¾´é‡ |

### ğŸ“– è©³ç´°ã‚¬ã‚¤ãƒ‰

- [`docs/TICKET-008_USAGE_GUIDE.md`](docs/TICKET-008_USAGE_GUIDE.md) - ã‚¸ãƒ£ãƒ³ãƒ«ç‰¹å¾´é‡ä½¿ç”¨ã‚¬ã‚¤ãƒ‰
- [`docs/TICKET-008-01_USAGE_GUIDE.md`](docs/TICKET-008-01_USAGE_GUIDE.md) - å¤šé‡å…±ç·šæ€§é™¤å»ã‚¬ã‚¤ãƒ‰
- [`docs/KAGGLE_SUBMIT_GUIDE.md`](docs/KAGGLE_SUBMIT_GUIDE.md) - Kaggleæå‡ºã‚¬ã‚¤ãƒ‰

--------

